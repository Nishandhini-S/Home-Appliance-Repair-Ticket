CREATE TABLE CUSTOMER_TBL (
    CUSTOMER_ID     VARCHAR2(12) PRIMARY KEY,
    FULL_NAME       VARCHAR2(150) NOT NULL,
    ADDRESS_LINE    VARCHAR2(250) NOT NULL,
    CITY            VARCHAR2(100) NOT NULL,
    PINCODE         VARCHAR2(10)  NOT NULL,
    PRIMARY_PHONE   VARCHAR2(20)  NOT NULL,
    STATUS          VARCHAR2(20)  CHECK (STATUS IN ('ACTIVE','INACTIVE'))
);
INSERT INTO CUSTOMER_TBL VALUES
('CUS1001','Rahul Mehta','Flat 4A, Lakeview Residency','Chennai','600097','9876500001','ACTIVE');

INSERT INTO CUSTOMER_TBL VALUES
('CUS1002','Priya Sharma','No. 12, MG Road','Bengaluru','560001','9876500002','ACTIVE');

INSERT INTO CUSTOMER_TBL VALUES
('CUS1003','Arjun Nair','Villa 5, Palm Meadows','Coimbatore','641001','9876500003','INACTIVE');

COMMIT;


SELECT * FROM CUSTOMER_TBL;


CREATE TABLE TECHNICIAN_TBL (
    TECHNICIAN_ID   VARCHAR2(12) PRIMARY KEY,
    FULL_NAME       VARCHAR2(150) NOT NULL,
    SKILL_CATEGORY  VARCHAR2(100) NOT NULL,
    SERVICE_REGION  VARCHAR2(100) NOT NULL,
    PHONE           VARCHAR2(20)  NOT NULL,
    STATUS          VARCHAR2(20) CHECK (STATUS IN ('ACTIVE','UNAVAILABLE'))
);


INSERT INTO TECHNICIAN_TBL VALUES
('TEC2001','Vijay Kumar','Refrigerator','Chennai-South','9000011111','ACTIVE');

INSERT INTO TECHNICIAN_TBL VALUES
('TEC2002','Meera Iyer','Washing Machine','Chennai-North','9000012222','ACTIVE');

INSERT INTO TECHNICIAN_TBL VALUES
('TEC2003','Sanjay Rao','Air Conditioner','Bengaluru-CBD','9000013333','UNAVAILABLE');

COMMIT;


SELECT * FROM TECHNICIAN_TBL;

CREATE TABLE SERVICE_TICKET_TBL (
    TICKET_ID               NUMBER(10) PRIMARY KEY,
    CUSTOMER_ID             VARCHAR2(12) REFERENCES CUSTOMER_TBL(CUSTOMER_ID),
    TECHNICIAN_ID           VARCHAR2(12) REFERENCES TECHNICIAN_TBL(TECHNICIAN_ID),
    APPLIANCE_TYPE          VARCHAR2(100) NOT NULL,
    PROBLEM_DESCRIPTION     VARCHAR2(400) NOT NULL,
    TICKET_DATE             DATE NOT NULL,
    SCHEDULED_VISIT_DATE    DATE,
    SCHEDULED_VISIT_SLOT    VARCHAR2(20),
    VISIT_OUTCOME           VARCHAR2(30),
    SERVICE_CHARGE          NUMBER(8,2),
    STATUS                  VARCHAR2(20)
);

INSERT INTO SERVICE_TICKET_TBL
(TICKET_ID, CUSTOMER_ID, APPLIANCE_TYPE, PROBLEM_DESCRIPTION, TICKET_DATE, STATUS)
VALUES
(700001,'CUS1001','Refrigerator','Not cooling properly',
 TO_DATE('2025-03-01','YYYY-MM-DD'),'OPEN');
INSERT INTO SERVICE_TICKET_TBL VALUES
(700002,'CUS1002','TEC2001','Refrigerator',
 'Ice buildup in freezer',
 TO_DATE('2025-02-25','YYYY-MM-DD'),
 TO_DATE('2025-02-27','YYYY-MM-DD'),
 '10:00-12:00','FIXED',850.00,'CLOSED');


SELECT * FROM SERVICE_TICKET_TBL;

DELETE FROM CUSTOMER_TBL
WHERE CUSTOMER_ID = 'CUS2001';

DELETE FROM TECHNICIAN_TBL
WHERE TECHNICIAN_ID = 'TEC3001';

COMMIT;




